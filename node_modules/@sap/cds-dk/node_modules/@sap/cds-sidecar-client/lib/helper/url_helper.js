const { URL } = require('url');

const IP_ADDR = /^[1-9][0-9]{0,2}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/;

module.exports = {
    extractSubdomain: (url) => {
        const hostname = new URL(url).hostname;
        if (hostname === 'localhost' || IP_ADDR.test(hostname)) {
            return undefined;
        }
        return hostname.split('.')[0];
    },
    schemaRegex: /^https?:\/\//,
    defaultSchema: 'https://'
};
