module.exports = Object.assign(extend, {
    options: ['--directory', '--subdomain', '--passcode', '--username'],
    flags: ['--wsdl', '--templates', '--force'],
    shortcuts: ['-d', '-s', '-p', '-u'],
    help: `
# SYNOPSIS

    *cds extend* [ <url> ]

   Create an extension project from an app URL


# OPTIONS

    *-d* | *--directory* <directory>
    
        The target directory.

    *-s* | *--subdomain* <subdomain>
    
        The subdomain to extend.
        
    *-p* | *--passcode* <passcode>
    
        The passcode for authentication

    *-u* | *--username* <name> 

        Deprecated. Use passcode parameter instead.
    
    *--force*

        Overwrite existing content. Make sure you are using a version control system (like git) to avoid data loss.

    *--templates*
    
        Download templates   
        
`})


async function extend ([url], options = {}) {
    const client = require('@sap/cds-sidecar-client')

    if (options.force) {
        if (! await client.question.askBooleanQuestion('Using option --force will overwrite extisting files. Continue (yN)? ', false, false)) {
            console.log('Extend cancelled')
            return
        }
    }

    Object.assign(options, { url })
    client.extend(options)
}


/* eslint no-console: off */
